!function(){var n={779:function(e,t){var n;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var o={}.hasOwnProperty;function l(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"==r||"number"==r)e.push(n);else if(Array.isArray(n)&&n.length){var a=l.apply(null,n);a&&e.push(a)}else if("object"==r)for(var i in n)o.call(n,i)&&n[i]&&e.push(i)}}return e.join(" ")}e.exports?(l.default=l,e.exports=l):void 0===(n=function(){return l}.apply(t,[]))||(e.exports=n)}()}},r={};function Nr(e){if(r[e])return r[e].exports;var t=r[e]={exports:{}};return n[e](t,t.exports,Nr),t.exports}Nr.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return Nr.d(t,{a:t}),t},Nr.d=function(e,t){for(var n in t)Nr.o(t,n)&&!Nr.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},Nr.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var c=CoreUtilities,Q=React,J=Nr.n(Q),e=ReactDOM,v=Nr.n(e),S=ReactRouterDOM,t=ReactUtilities,n={common:["Common.GameSorts"],feature:"Feature.GamePage"},r=n,E=HeaderScripts,a=Nr(779),$=Nr.n(a),I=ReactStyleGuide,i=PropTypes,o=Nr.n(i),l=Roblox,P=CoreRobloxUtilities,f=null!==l.CurrentUser&&void 0!==l.CurrentUser&&l.CurrentUser.userId?"gameSort_".concat(l.CurrentUser.userId):"gameSort_guest",s=l.EnvironmentUrls.gamesApi,N={gamesDefaultSortAlgorithm:"GamesDefaultSorts",gamesHomeSortAlgorithm:"HomeSorts",pageSizeOfHomeSorts:12,pageSize:40,getGameSortsWithDetaultSorts:{url:"".concat(s,"/v1/games/sorts"),withCredentials:!0},getGamesList:{url:"".concat(s,"/v1/games/list"),withCredentials:!0},getGameMedias:function(e){return{url:"".concat(s,"/v2/games/").concat(e,"/media"),withCredentials:!0}},getPlayabilityStatus:{url:"".concat(s,"/v1/games/multiget-playability-status"),withCredentials:!0},getRecommendedGames:function(e){return{url:"".concat(s,"/v1/games/recommendations/game/").concat(e),withCredentials:!0}},params:{sortToken:null,keyword:null,exclusiveStartId:null,isKeywordSuggestionEnabled:!0,hasMoreRows:!0,startRows:0,maxRows:60,gameSetTargetId:null},recommendedGamesParams:{maxRows:6},mediaTypes:{image:"Image",youtube:"YouTubeVideo"}};function u(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function m(r){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach(function(e){var t,n;t=r,e=a[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(a,e))})}return r}function p(e,r){var a=e||N.gamesDefaultSortAlgorithm,e={gameSortsContext:a};return g&&clearTimeout(g),c.httpService.get(N.getGameSortsWithDetaultSorts,e).then(function(e){var s,u,c,m,d,t,n=e.data;return null!=n&&n.sorts&&r&&(s=a,e=(t=n).sorts,u=t.timeFilters,c=t.pageContext,m=(new Date).getTime(),t=P.localStorageService.getLocalStorage(f)||{},d={},e.forEach(function(e,t){var n=e.token,r=e.displayName,a=e.name,i=e.gameSetTargetId,o=e.tokenExpiryInSeconds,l=e.contextCountryRegionId,e=e.timeOptionsAvailable;d[a]={name:a,displayName:r,token:n,gameSetTargetId:i,dateStoredTime:m,tokenExpiryInSeconds:o,gameSortContext:s,sortPosition:t,pageContext:c,contextCountryRegionId:l,timeOptionsAvailable:e,timeFilters:u}}),t=Object.assign(t,d),P.localStorageService.setLocalStorage(f,t),t=0<(null==(t=n.sorts)?void 0:t.length)?1e3*t[0].tokenExpiryInSeconds:36e5,g=setTimeout(function(){p()},t)),n})}var g=null,d=p,x=function(e){return c.httpService.get(N.getGamesList,e).then(function(e){return e.data})},T=function(e,t){var n=m({},t);return n.hasMoreRows=e.hasMoreRows,e.hasMoreRows&&(e.nextPageExclusiveStartId?n.exclusiveStartId=e.nextPageExclusiveStartId:(e=t.startRows,t=t.maxRows,n.startRows=e+t)),n},O=function(e){var t=null;return e.forEach(function(e){"PastWeek"===e.name&&(t=e.token)}),t},R=RobloxThumbnails;function h(e){var t=e.game,n=e.isOneLine,e=e.handlePlayerInteraction,n=$()("game-card-name game-name-title",{"game-name-oneline":n});return J().createElement(J().Fragment,null,e?J().createElement("div",{"data-testid":"game-tile-game-name",className:n,title:t.name,onClick:e,role:"button","aria-hidden":!0},t.name):J().createElement("div",{"data-testid":"game-tile-game-name",className:n,title:t.name},t.name))}h.defaultProps={isOneLine:!1,handlePlayerInteraction:null},h.propTypes={game:o().shape({name:o().string}).isRequired,isOneLine:o().bool,handlePlayerInteraction:o().func};var C=h;function b(e){var t=e.game,n=t.totalUpVotes,e=t.totalDownVotes,t=t.playerCount,n=function(e,t){var n=0;if(!Number.isNaN(e)&&!Number.isNaN(t)){if(0===e){if(0===t)return null;n=0}else n=0===t?100:Math.floor(e/(e+t)*100);100<n&&(n=100)}return"".concat(n,"%")}(n,e),e=c.abbreviateNumber.getAbbreviatedValue(t);return J().createElement("div",{"data-testid":"game-tile-card-info",className:"game-card-info"},J().createElement("span",{className:"info-label icon-votes-gray"}),n?J().createElement("span",{"data-testid":"game-tile-card-info-vote-label",className:"info-label vote-percentage-label"},n):J().createElement("span",{"data-testid":"game-tile-card-info-no-vote",className:"info-label no-vote"}),J().createElement("span",{className:"info-label icon-playing-counts-gray"}),J().createElement("span",{className:"info-label playing-counts-label",title:t},e))}b.propTypes={game:o().shape({universeId:o().number,playerCount:o().number,totalUpVotes:o().number,totalDownVotes:o().number}).isRequired};var D=b,y="Label.SponsoredAd";function w(e){e=e.translate;return J().createElement("div",{"data-testid":"game-tile-native-ad",className:"game-card-native-ad"},J().createElement("span",{className:"font-footer native-ad-label"},e(y)))}w.propTypes={translate:o().func.isRequired};var k=w,L={notificationTypes:{gameFavoriteNotifications:"GameFavoriteNotifications",gameCloseNotifications:"GameCloseNotifications"},sortsNeedRealtimeUpdate:{myFavorite:"MyFavorite",myRecent:"MyRecent"},pageTypes:{home:"Home",gameDetail:"GameDetail"},maxNumOfGamesPerList:6,seeAllLinkLabel:"Action.SeeAll",NoGamesLabel:"Label.NoGames",seeAllClass:"see-all-button games-filter-changer btn-min-width btn-secondary-xs btn-more see-all-link-icon",deviceTypes:{computer:"Computer"}},G=function(e,t,n,r,a,i,o,l,s){var u=8<arguments.length&&void 0!==s&&s,s=e.placeId,e=e.nativeAdData,u={PageType:t,PlaceId:s,Position:n+1,IsLargeGameTile:u};t===L.pageTypes.gameDetail&&(u.RecommendationSourceId=l,u.RecommendationAlgorithm=2),e&&(u.NativeAdData=e),r&&(u.SortName=r),null!=a&&a.pageId&&(u.PageId=null==a?void 0:a.pageId),-1<i&&(u.SortPosition=i+1);u=c.urlService.getUrlWithQueries(P.entityUrl.game.getReferralPath(),u),o=o||(new Date).toISOString();return u="".concat(u,"&LocalTimestamp=").concat(o)},A=4,j="Label.ContextMenuTitle",M="Action.ViewDetails",U="Action.JoinGame",F={goToProfileInPlacesList:{name:"goToProfileInPlacesList",ctx:"click"},openModalFromGameTile:{name:"openModalFromGameTile",ctx:"click"},goToChatInPlacesList:{name:"goToChatInPlacesList",ctx:"click"},joinGameInPlacesList:{name:"joinGameInPlacesList",ctx:"click"},goToGameDetailInPlacesList:{name:"goToGameDetailInPlacesList",ctx:"click"},gamePlayIntentInPlacesList:{ctx:"placesListInHomePage"}};function z(e){var t=e.playerId,e=e.altName;return J().createElement("div",{className:"avatar-card-link"},J().createElement(R.Thumbnail2d,{type:R.ThumbnailTypes.avatarHeadshot,size:R.ThumbnailAvatarHeadshotSize.size48,targetId:t,imgClassName:"avatar-card-image",format:R.ThumbnailFormat.png,altName:e}))}z.defaultProps={altName:""},z.propTypes={playerId:o().number.isRequired,altName:o().string};var q=z;function H(e){var t=e.friendsData,n=e.handlePlayerInteraction,i=e.friendsInGame,o=A,e=i.length,l=o<e?"+".concat(i.length-o+1):0,s={};return t.forEach(function(e){s[e.id]=e}),J().createElement("ul",{"data-testid":"game-players-players",className:"cursor-pointer game-card-avatar-slots",onClick:n,"aria-hidden":"true"},i.length&&i.map(function(e,t){if(t+1<o&&s[e]){var n=e+t,r=s[e],a=r.id,r=r.nameForDisplay;return J().createElement("li",{key:n,className:"avatar avatar-headshot avatar-headshot-xs",title:r},J().createElement(q,{playerId:a,altName:r}))}if(t+1===o&&s[e]&&i.length===o){a=e+t,r=s[e],e=r.id,r=r.nameForDisplay;return J().createElement("li",{key:a,className:"avatar avatar-headshot avatar-headshot-xs",title:r},J().createElement(q,{playerId:e,altName:r}))}return t+1===o&&i.length>o?J().createElement("li",{className:"avatar avatar-headshot avatar-headshot-xs offset-card"},J().createElement("span",{className:"xsmall avatar-offset-label"},l)):null}))}H.propTypes={friendsData:o().arrayOf(o().shape({presense:o().shape({userPresenceType:o().number}),id:o().number,nameForDisplay:o().string})).isRequired,handlePlayerInteraction:o().func.isRequired,friendsInGame:o().arrayOf(o().number).isRequired};var V=H;function B(e){var t=e.game,n=e.translate,r=t.universeId,a=t.name,e=t.referralUrl,t=t.isPlayable,r=J().createElement(R.Thumbnail2d,{type:R.ThumbnailTypes.gameIcon,size:R.DefaultThumbnailSize,targetId:r,imgClassName:"game-card-thumb",format:R.ThumbnailFormat.jpeg});return J().createElement("div",{className:"border-bottom player-interaction-container"},J().createElement("span",{className:"cursor-pointer game-icon"},J().createElement(I.Link,{url:e,className:"game-card-link"},r)),J().createElement("span",{className:"game-info-container"},J().createElement(I.Link,{url:e,className:"game-name"},a),!t&&J().createElement(I.Link,{url:e,className:"btn-control-sm game-link"},n(M))))}B.propTypes={game:o().shape({universeId:o().number,placeId:o().number,name:o().string,playerCount:o().number,isShowSponsoredLabel:o().bool,nativeAdData:o().string,imageUrl:o().string,referralUrl:o().string,isPlayable:o().bool}).isRequired,translate:o().func.isRequired};var W=B;function Y(e){var t=e.playerData,i=e.dismissModal,n=e.isPlayable,r=e.translate,e=t.presence,o=e.rootPlaceId,l=e.placeId,s=e.gameId,u=t.id,t=t.nameForDisplay;return J().createElement("div",{className:"border-bottom player-info"},J().createElement("span",{className:"player-name"},t),J().createElement(I.Button,{className:"cursor-pointer btn-primary-sm player-action",onClick:function(e){var t={rootPlaceId:o,placeId:l},n=P.playGameService.buildPlayGameProperties(o,l,s,u),r=F.joinGameInPlacesList,a=F.gamePlayIntentInPlacesList,a={eventName:r.name,ctx:r.ctx,properties:t,gamePlayIntentEventCtx:a.ctx};P.playGameService.launchGame(n,a),i(e)},isDisabled:!n},r(U)))}Y.propTypes={playerData:o().shape({presence:o().shape({rootPlaceId:o().number,placeId:o().number,gameId:o().string}),id:o().number,nameForDisplay:o().string}).isRequired,dismissModal:o().func.isRequired,isPlayable:o().bool.isRequired,translate:o().func.isRequired};var _=Y;function K(e){var t=e.friendsData,n=e.friendsInGame,a=e.dismissModal,i=e.isPlayable,o=e.translate,l={};return t.forEach(function(e){l[e.id]=e}),J().createElement("div",{className:"interaction-container"},J().createElement("ul",{className:"interaction-list"},n.map(function(e,t){var n=e+t,r=l[e],t=r.id,e=r.nameForDisplay;return J().createElement("li",{key:n,className:"interaction-item","aria-hidden":"true"},J().createElement("span",{className:"avatar avatar-headshot avatar-headshot-sm player-avatar"},J().createElement(q,{playerId:t,altName:e})),J().createElement(_,{playerData:r,dismissModal:a,isPlayable:i,translate:o}))})))}K.propTypes={friendsData:o().arrayOf(o().shape({presense:o().shape({rootPlaceId:o().number,placeId:o().number,gameId:o().string}),id:o().number,nameForDisplay:o().string})).isRequired,friendsInGame:o().arrayOf(o().number).isRequired,dismissModal:o().func.isRequired,isPlayable:o().bool.isRequired,translate:o().func.isRequired};var X=K;function Z(e){var t=e.friendsData,n=e.friendsInGame,r=e.game,a=e.dismissModal,i=e.translate,e=i(j);return J().createElement("div",{"data-testid":"game-players-player-interaction-modal"},J().createElement(I.Modal.Header,{title:e,onClose:a}),J().createElement(W,{game:r,translate:i}),J().createElement(X,{friendsData:t,friendsInGame:n,dismissModal:a,isPlayable:r.isPlayable,translate:i}))}function ee(e,t,n){return void 0===n&&(n={}),c.urlService.getUrlWithQueries(P.entityUrl.game.getRelativePath(e)+"/"+c.seoName.formatSeoName(t),n)}Z.propTypes={friendsData:o().arrayOf(o().shape({presense:o().shape({rootPlaceId:o().number,placeId:o().number,gameId:o().string}),id:o().number,nameForDisplay:o().string})).isRequired,friendsInGame:o().arrayOf(o().number).isRequired,game:o().shape({universeId:o().number,placeId:o().number,name:o().string,playerCount:o().number,isShowSponsoredLabel:o().bool,nativeAdData:o().string,imageUrl:o().string,referralUrl:o().string,isPlayable:o().bool}).isRequired,dismissModal:o().func.isRequired,translate:o().func.isRequired};var te=Z,ne={offline:{status:0,className:""},online:{status:1,className:"icon-online"},ingame:{status:2,className:"icon-game"},instudio:{status:3,className:"icon-studio"}},re=function(e,a){var i=[];return null!=e&&e.length&&e.forEach(function(e){var t,n,r;null!=e&&e.presence&&(n=(r=e.presence).universeId,r=r.userId,n===a&&(null==e||null===(t=e.presence)||void 0===t?void 0:t.userPresenceType)===ne.ingame.status&&i.push(r))}),i},ae=function(e,a,i,o){if(null==e||!e.length||null==a||!a.length)return null;var l=!1;return e.forEach(function(t){var n=t.userId,e=t.universeId,r=t.userPresenceType;e===o&&r===ne.ingame.status&&i.indexOf(n)<0?(l=!0,a.forEach(function(e){n===e.id&&(e.presence=t)})):r!==ne.ingame.status&&-1<i.indexOf(n)&&(l=!0,a.forEach(function(e){n===e.id&&(e.presence=t)}))}),l?a:null},ie=ee;function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return se(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(Dt=J().forwardRef(function(e,t){var n=e.game,r=e.pageType,a=e.index,i=e.sortName,o=e.pageContext,l=e.sortPosition,s=e.dateTime,u=e.friendsData,c=e.gameDetailPlaceId,m=e.isHidden,d=e.buildEventProperties,f=n.universeId,o=G(n,r,a,i,o,l,s,c);n.referralUrl=o;var l=le((0,Q.useState)(u),2),s=l[0],p=l[1],c=le((0,Q.useState)([]),2),v=c[0],g=c[1],l=le((0,Q.useState)(re(u,f)),2),h=l[0],b=l[1],c=le((0,Q.useState)(!1),2),l=c[0],y=c[1],w=(0,Q.useRef)(),c=function(){y(!0),w.current=!0},d=d?ie(n.placeId,n.name,d(n,a)):o,a=function(){null!=v&&v.length&&(b(re(v,f)),p(v),g([])),y(!1),w.current=!1},S=(0,Q.useCallback)(function(e){null==e||!e.detail||null!=(e=ae(e.detail,u,h,f))&&e.length&&(w.current?g(e):(b(re(e,f)),p(e)))},[u,h,f]),o=J().createElement("div",{className:"game-card-thumb-container"},J().createElement(R.Thumbnail2d,{type:R.ThumbnailTypes.gameIcon,size:R.DefaultThumbnailSize,targetId:n.universeId,containerClass:"game-card-thumb",format:R.ThumbnailFormat.jpeg,altName:n.name}));return(0,Q.useEffect)(function(){return null!=u&&u.length&&document.addEventListener("Roblox.Presence.Update",S),function(){null!=u&&u.length&&document.removeEventListener("Roblox.Presence.Update",S)}},[u,h,S,f]),J().createElement("div",{className:"game-card-container",ref:t},0<h.length&&J().createElement(J().Fragment,null,J().createElement(I.Link,{tabIndex:m?-1:0,"aria-hidden":m,url:d,className:"game-card-link",id:n.universeId},o),J().createElement(C,{game:n,isOneLine:!0,handlePlayerInteraction:c}),J().createElement(V,{handlePlayerInteraction:c,friendsData:s,friendsInGame:h}),J().createElement(I.Modal,{show:l,onHide:a,size:"lg"},J().createElement(te,oe({friendsData:s,friendsInGame:h,game:n,dismissModal:a},e)))),0===h.length&&J().createElement(I.Link,{tabIndex:m?-1:0,"aria-hidden":m,url:d,className:"game-card-link",id:n.universeId},o,J().createElement(C,{game:n}),n.isShowSponsoredLabel&&J().createElement(k,e),!n.isShowSponsoredLabel&&J().createElement(D,{game:n})))})).defaultProps={sortName:null,sortPosition:-1,pageContext:{pageId:null},dateTime:null,friendsData:[],buildEventProperties:void 0,gameDetailPlaceId:null,isHidden:!1},Dt.propTypes={game:o().shape({universeId:o().number,placeId:o().number,name:o().string,playerCount:o().number,isShowSponsoredLabel:o().bool,nativeAdData:o().string,referralUrl:o().string}).isRequired,buildEventProperties:o().func,pageType:o().string.isRequired,isHidden:o().bool,index:o().number.isRequired,sortName:o().string,pageContext:o().shape({pageId:o().string}),sortPosition:o().number,dateTime:o().string,friendsData:o().arrayOf(o().shape({presense:o().shape({userPresenceType:o().number}),id:o().number,nameForDisplay:o().string})),gameDetailPlaceId:o().number},Dt.displayName="GameTile";var ue=Dt;(a=function(e){var t=e.gameDescription,n=e.placeId;return J().createElement("div",{"data-testid":"game-tile-hover-game-tile-contents",className:"game-card-contents"},t&&J().createElement("p",{className:"game-description font-caption-header"},t),J().createElement(I.Button,{width:I.Button.widths.full,variant:I.Button.variants.growth,size:I.Button.sizes.extraSmall,onClick:function(){P.playGameService.launchGame(P.playGameService.buildPlayGameProperties(void 0,n),{eventName:"playGameClicked",ctx:"click",properties:{placeId:n},gamePlayIntentEventCtx:"PlayButton"})}},J().createElement("span",{className:"icon-common-play"})))}).defaultProps={gameDescription:null},a.propTypes={gameDescription:o().string,placeId:o().number.isRequired};var ce=a;(i=J().forwardRef(function(e,t){var n=e.game,r=e.isVisible,a=e.pageType,i=e.index,o=e.sortName,l=e.pageContext,s=e.sortPosition,u=e.dateTime,c=n.placeId,m=n.universeId,d=n.gameDescription,u=G(n,a,i,o,l,s,u,c,!0);return n.referralUrl=u,J().createElement("div",{className:"featured-game-container game-card-container",ref:t},J().createElement(I.Link,{url:u,className:"game-card-link"},r&&J().createElement("div",{className:"thumb-container"},J().createElement(R.Thumbnail2d,{type:R.ThumbnailTypes.universeThumbnail,size:R.ThumbnailGameThumbnailSize.width576,targetId:m,imgClassName:"thumb",format:R.ThumbnailFormat.jpeg,altName:n.name}),J().createElement("div",{className:"thumb-mask"})),J().createElement("div",{className:"featured-game-icon-container"},J().createElement(R.Thumbnail2d,{type:R.ThumbnailTypes.gameIcon,size:R.ThumbnailGameIconSize.size512,targetId:m,containerClass:"brief-game-icon",format:R.ThumbnailFormat.jpeg,altName:n.name})),J().createElement("div",{className:"info-container"},J().createElement(C,{game:n}),n.isShowSponsoredLabel&&J().createElement(k,e),!n.isShowSponsoredLabel&&J().createElement(D,{game:n}))),J().createElement(ce,{placeId:c,gameDescription:d}))})).defaultProps={isVisible:!1,sortName:null,sortPosition:-1,pageContext:{pageId:null},dateTime:null},i.propTypes={game:o().shape({universeId:o().number,placeId:o().number,name:o().string,gameDescription:o().string,playerCount:o().number,isShowSponsoredLabel:o().bool,nativeAdData:o().string,referralUrl:o().string}).isRequired,isVisible:o().bool,pageType:o().string.isRequired,index:o().number.isRequired,sortName:o().string,pageContext:o().shape({pageId:o().string}),sortPosition:o().number,dateTime:o().string},i.displayName="HoverGameTile";var me=i,de={maxTilesInGameImpressionsEvent:25,numberOfInGameIcons:3,numberOfInGameNames:1,numberOfGameTilesPerLoad:60,numberOfGamePassesPerLoad:50,keyBoardEventCode:{enter:"Enter"}},fe=de.keyBoardEventCode;function pe(e){var t=e.scrollClassNames,n=e.scrollIconClassName,r=e.scroll;e.isDisabled;return J().createElement("div",{"data-testid":"game-carousel-scroll-bar",className:t,onClick:r,onKeyDown:function(e){e.code===fe.enter&&(e.stopPropagation(),e.preventDefault(),r(e))},role:"button",tabIndex:0},J().createElement("div",{className:"arrow"},J().createElement("span",{className:n})),J().createElement("div",{className:"spacer"}))}function ve(e){return(null==e?void 0:e.clientWidth)+14}function ge(e,t){return Number.isNaN(t)?0:Math.floor(e/t)*t}pe.propTypes={scrollClassNames:o().string.isRequired,scrollIconClassName:o().string.isRequired,scroll:o().func.isRequired,isDisabled:o().bool.isRequired};var he=pe,be="scroller prev",ye="scroller next",we="icon-games-carousel-left",Se="icon-games-carousel-right",Ee={left:"0px"},Ie={gameCarousel:"Games",gameSearch:"GameSearch",gameSeeAll:"GamesSeeAll"},Pe=70,Ne=60,xe={featureGameTile:"featured-tile"},Te=l.DeviceMeta&&(0,l.DeviceMeta)().isDesktop,Oe=16,Re=32,Ce=function(e,t,n){return e+ge(t,n)},De=function(e,t,n){return e-ge(t,n)},ke=function(e){return null==e?void 0:e.clientHeight},Le=function(e,t){return Number.isNaN(t)?0:Math.floor(e/t)},Ge=function(e){return 0===e},Ae=function(e,t,n){return e<=Math.abs(n)+t},je=ve;function Me(){return(Me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ze(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),i=0;i<a.length;i++)n=a[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function qe(e){function a(e){T({left:"".concat(e,"px")})}function i(e,t){R({isPrevDisabled:e,isNextDisabled:t}),e=$()(C,{disabled:e}),t=$()(D,{disabled:t}),k({prev:e,next:t})}function t(e,n){var r=e,a=(e=z+Pe)>(null==n?void 0:n.length)?null==n?void 0:n.length:e;r.forEach(function(e,t){t<G&&(r[t]={}),G<=t&&t<a&&(r[t]=n[t])}),F(G),q(a),V(r)}var r=e.gamesData,n=e.loadMore,o=e.name,l=(e.sortApiParams,e.pageContext),s=e.sortPosition,u=e.sortStyle,c=e.isInitializedLoading,m=ze(e,["gamesData","loadMore","name","sortApiParams","pageContext","sortPosition","sortStyle","isInitializedLoading"]),d=(0,Q.useRef)(),f=(0,Q.useRef)(),p=(0,Q.useRef)(),v=Ue((0,Q.useState)(null===(w=d.current)||void 0===w?void 0:w.clientWidth),2),g=v[0],h=v[1],e=Ue((0,Q.useState)(null!==(N=f.current)&&void 0!==N&&N.offsetLeft?null===(x=f.current)||void 0===x?void 0:x.offsetLeft:0),2),b=e[0],y=e[1],w=Ue((0,Q.useState)(je(p.current)),2),S=w[0],E=w[1],v=Ue((0,Q.useState)(Le(g,S)),2),I=v[0],P=v[1],N=Ue((0,Q.useState)(Ee),2),x=N[0],T=N[1],e=Ue((0,Q.useState)({isPrevDisabled:!0,isNextDisabled:!1}),2),O=e[0],R=e[1],C=be,D=ye,w=we,v=Se,N=Ue((0,Q.useState)({prev:C,next:D}),2),e=N[0],k=N[1],L=(0,Q.useCallback)(function(e){var t,n=Ge(e),r=null===(t=f.current)||void 0===t?void 0:t.clientWidth,a=g;g||(a=null===(t=d.current)||void 0===t?void 0:t.clientWidth);e=Ae(r,a,e);i(n,e)},[g,i]),N=Ue((0,Q.useState)(0),2),G=N[0],A=N[1],N=Ue((0,Q.useState)(r),2),j=N[0],M=N[1],N=Ue((0,Q.useState)(0),2),U=N[0],F=N[1],N=Ue((0,Q.useState)(20),2),z=N[0],q=N[1],N=Ue((0,Q.useState)([]),2),H=N[0],V=N[1],B=null,W=null,Y=(0,Q.useCallback)(function(e){O.isNextDisabled||(n(),e||((e=S)&&!Number.isNaN(e)||(e=je(p.current),E(e)),e=De(b,g,e),y(e),a(e),L(e),e=G+I,z<=G+2*I&&t(H,j),A(e)))});(0,Q.useEffect)(function(){var e,t=je(p.current);Number.isNaN(t)||(E(function(){return t}),e=Le(g,t),P(e))},[g]),(0,Q.useEffect)(function(){function e(){var e;h(null===(e=d.current)||void 0===e?void 0:e.clientWidth)}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}},[]),(0,Q.useEffect)(function(){var e;return c?(h(null===(e=d.current)||void 0===e?void 0:e.clientWidth),y(null===(e=f.current)||void 0===e?void 0:e.offsetLeft)):z<=G+2*I&&t(H,j),L(b),function(){}},[H]),(0,Q.useEffect)(function(){var e,t,n;return null!=r&&r.length&&(M(r),H.length?(e=r.length,(t=H.length)<e&&(n=Array(e-t).fill({}),V(function(e){return e.concat(n)}))):(V(function(e){return e.concat(r)}),q(r.length))),function(){}},[r]);N=(0,Q.useCallback)(function(){console.log("------listenScrollEvent------"),Y(!0)},[Y]);return J().createElement("div",{"data-testid":"game-carousel-carousel-container",className:"clearfix horizontal-scroll-window",ref:d},J().createElement("div",{className:"horizontally-scrollable",style:x,onScroll:N,ref:f},J().createElement("ul",{className:"hlist games game-cards game-tile-list"},0<H.length&&H.map(function(e,t){var n="".concat(e.universeId).concat(t),r=t===G,a=t===G+I-1,i=G<=t&&t<=G+I-1;return u===xe.featureGameTile?J().createElement("li",{className:$()("list-item hover-game-tile",{"first-tile":r},{"last-tile":a},{"visible-tile":i}),id:e.universeId,key:n},(null==e?void 0:e.universeId)&&J().createElement(me,Me({game:e,isVisible:i,pageType:Ie.gameCarousel,ref:p,index:t,sortName:o,pageContext:l,sortPosition:s},m))):J().createElement("li",{className:"list-item game-card game-tile",id:e.universeId,key:n,title:null==e?void 0:e.name},(null==e?void 0:e.universeId)&&J().createElement(ue,Me({game:e,isHidden:!(G<=t&&t<=G+I-1),pageType:Ie.gameCarousel,ref:p,index:t,sortName:o,pageContext:l,sortPosition:s},m)))}))),J().createElement(he,Me({scrollClassNames:e.prev,scrollIconClassName:w,isDisabled:O.isPrevDisabled,scroll:function(){var e,n,r,t;return B||(O.isPrevDisabled||((e=S)&&!Number.isNaN(e)||(e=je(p.current),E(e)),t=Ce(b,g,S),y(t),a(t),L(t),(e=G-I)<=U&&(r=(t=U-Pe)<0?0:t,t=G,(n=H).forEach(function(e,t){G<t&&(n[t]={}),t<=G&&r<=t&&(n[t]=j[t])}),F(r),q(t),V(n)),A(e)),B=setTimeout(function(){clearTimeout(B)},200)),!1}},m)),J().createElement(he,Me({scrollClassNames:e.next,scrollIconClassName:v,isDisabled:O.isNextDisabled,scroll:function(){return W||(Y(),W=setTimeout(function(){clearTimeout(W)},200)),!1}},m)))}qe.propTypes={gamesData:o().arrayOf(o().shape({universeId:o().number})).isRequired,loadMore:o().func.isRequired,name:o().string.isRequired,sortApiParams:o().shape({hasMoreRows:o().bool}).isRequired,pageContext:o().shape({pageId:o().string}).isRequired,sortPosition:o().number.isRequired,sortStyle:o().string.isRequired,isInitializedLoading:o().bool.isRequired,translate:o().func.isRequired};var He=qe;(Dt=J().forwardRef(function(e,t){var n=e.game,r=e.pageType,a=e.index,i=e.sortName,o=e.pageContext,l=e.sortPosition,s=e.dateTime,u=e.buildEventProperties,c=n.placeId,m=n.universeId,c=G(n,r,a,i,o,l,s,c,!0);n.referralUrl=c;c=u?ie(n.placeId,n.name,u(n,a)):c;return J().createElement("div",{className:"featured-game-container game-card-container",ref:t},J().createElement(I.Link,{url:c,className:"game-card-link"},J().createElement("div",{className:"thumb-container"},J().createElement(R.Thumbnail2d,{type:R.ThumbnailTypes.universeThumbnail,size:R.ThumbnailGameThumbnailSize.width576,targetId:m,imgClassName:"thumb",format:R.ThumbnailFormat.jpeg,altName:n.name}),J().createElement("div",{className:"thumb-mask"})),J().createElement("div",{className:"featured-game-icon-container"},J().createElement(R.Thumbnail2d,{type:R.ThumbnailTypes.gameIcon,size:R.DefaultThumbnailSize,targetId:m,containerClass:"brief-game-icon",format:R.ThumbnailFormat.jpeg,altName:n.name})),J().createElement("div",{className:"info-container"},J().createElement(C,{game:n}),n.isShowSponsoredLabel&&J().createElement(k,e),!n.isShowSponsoredLabel&&J().createElement(D,{game:n}))))})).defaultProps={sortName:null,sortPosition:-1,pageContext:{pageId:null},dateTime:null,buildEventProperties:void 0},Dt.propTypes={game:o().shape({universeId:o().number,placeId:o().number,name:o().string,gameDescription:o().string,playerCount:o().number,isShowSponsoredLabel:o().bool,nativeAdData:o().string,referralUrl:o().string}).isRequired,pageType:o().string.isRequired,index:o().number.isRequired,buildEventProperties:o().func,sortName:o().string,pageContext:o().shape({pageId:o().string}),sortPosition:o().number,dateTime:o().string},Dt.displayName="FeatureGameTile";var Ve=Dt;function Be(){return(Be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function We(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ye(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qe(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),i=0;i<a.length;i++)n=a[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function Je(e){var r=e.eventRef,t=e.gamesData,n=e.sort,a=e.isNumberRowsLimited,i=e.pageType,o=e.featureUniverseId,l=e.isDataFetching,s=e.sortPosition,u=e.pageContext,c=Qe(e,["eventRef","gamesData","sort","isNumberRowsLimited","pageType","featureUniverseId","isDataFetching","sortPosition","pageContext"]),m=(0,Q.useRef)(),d=n.numberOfRows,f=n.name,e=We((0,Q.useState)({height:"auto"}),2),n=e[0],p=e[1];return(0,Q.useEffect)(function(){var e;a&&m.current&&(e=ke(m.current)+12,p({height:"".concat(e*d,"px")}))},[m,a,d]),J().createElement("div",{"data-testid":"game-grid-grid-container",className:"multi-row clearfix game-grid-container",style:n},t&&t.map(function(e,t){var n="".concat(e.universeId).concat(t);return e.universeId===o?J().createElement("li",{className:"featured-game-tile",key:n,title:null==e?void 0:e.name},J().createElement(Ve,Be({game:e,pageType:i,index:t,sortName:f,sortPosition:s,pageContext:u},c,{ref:m}))):J().createElement("li",{ref:r,className:"game-card game-tile",key:n,title:null==e?void 0:e.name},J().createElement(ue,Be({game:e,pageType:i,index:t,sortName:f,sortPosition:s,pageContext:u},c,{ref:m})))}),l?J().createElement(I.Loading,null):null)}Je.defaultProps={eventRef:void 0,gamesData:[],isNumberRowsLimited:!1,sort:{numberOfRows:1},featureUniverseId:0,isDataFetching:!1,sortPosition:-1,pageContext:{pageId:null}},Je.propTypes={eventRef:o().oneOfType([o().func,o().shape({current:o().instanceOf(Element)})]),gamesData:o().arrayOf(o().shape({universeId:o().number})),sort:o().shape({numberOfRows:o().number,name:o().string}),isNumberRowsLimited:o().bool,pageType:o().string.isRequired,featureUniverseId:o().number,isDataFetching:o().bool,sortPosition:o().number,pageContext:o().shape({pageId:o().string}),translate:o().func.isRequired};var $e=Je;function _e(e){var t=e.translate,n=e.headerLabel,e=e.isSeeAllHidden,e=$()(L.seeAllClass,{hidden:e});return J().createElement("div",{"data-testid":"game-lists-game-container-header",className:"container-header games-filter-changer"},J().createElement("h3",null,n),J().createElement("span",{"data-testid":"game-lists-game-container-header-see-all-button",className:e},t(L.seeAllLinkLabel)))}_e.defaultProps={isSeeAllHidden:!1},_e.propTypes={translate:o().func.isRequired,headerLabel:o().string.isRequired,isSeeAllHidden:o().bool};var Ke=_e;function Xe(){return(Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return et(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return et(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tt(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),i=0;i<a.length;i++)n=a[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function nt(e){var t=e.sort,n=e.pageContext,r=e.sortPosition,a=e.sortStyle,i=e.timeFilters,o=tt(e,["sort","pageContext","sortPosition","sortStyle","timeFilters"]),l=Ze((0,Q.useState)([]),2),s=l[0],u=l[1],c=t.token,m=t.displayName,d=t.name,f=t.numberOfRows,p=t.gameSetTargetId,e=t.contextCountryRegionId,l=t.timeOptionsAvailable,e={sortToken:c,gameSetTargetId:p,startRows:N.params.startRows,maxRows:a===xe.featureGameTile?Oe:Re,hasMoreRows:!0,sortPosition:r,contextCountryRegionId:e};l&&(e.timeFilter=O(i)),e["pageContext.pageId"]=null==n?void 0:n.pageId;function v(n,e){!(y||!g.hasMoreRows)&&(null==s?void 0:s.length)<=Ne&&(e&&b(!0),w(!0),x(g).then(function(t){var e;!n&&null!=t&&t.games&&(u(function(e){return e.concat(t.games)}),e=T(t,g),h(e))},function(){n||h(function(e){return Object.assign(e,{hasMoreRows:!1})})}).finally(function(){!n&&e&&b(!1),n||w(!1)}))}var l=Ze((0,Q.useState)(e),2),g=l[0],h=l[1],i=Ze((0,Q.useState)(!1),2),e=i[0],b=i[1],l=Ze((0,Q.useState)(!1),2),y=l[0],w=l[1];(0,Q.useEffect)(function(){return v(!1,!0),function(){}},[]);i="sortName/".concat(t.name),l=$()("games-list-container",{"is-windows":null===E.jsClientDeviceIdentifier||void 0===E.jsClientDeviceIdentifier?void 0:E.jsClientDeviceIdentifier.isWindows});return J().createElement("div",{"data-testid":"game-carousel-games-container",className:l},J().createElement(S.NavLink,{to:i},J().createElement(Ke,Xe({headerLabel:m},o))),e?J().createElement(I.Loading,null):null,0<s.length&&J().createElement("div",{className:$()("horizontal-scroller games-list",{"large-tiles":a===xe.featureGameTile})},1===f&&J().createElement(He,Xe({gamesData:s,name:d,loadMore:v,sortApiParams:g,pageContext:n,sortPosition:r,sortStyle:a,isInitializedLoading:e},o)),1<f&&J().createElement($e,Xe({gamesData:s,pageType:Ie.gameCarousel,isNumberRowsLimited:!0,sort:t,sortPosition:r,pageContext:n},o))))}nt.propTypes={sort:o().shape({token:o().string,displayName:o().string,name:o().string,numberOfRows:o().number,gameSetTargetId:o().number,contextCountryRegionId:o().number,timeOptionsAvailable:o().bool}).isRequired,pageContext:o().shape({pageId:o().string}).isRequired,sortPosition:o().number.isRequired,sortStyle:o().string.isRequired,timeFilters:o().arrayOf(o().shape({token:o().string,name:o().string})).isRequired,translate:o().func.isRequired};var rt=nt;function at(){return(at=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ot(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lt(n){var e=it((0,Q.useState)([]),2),t=e[0],r=e[1],a=(e=it((0,Q.useState)(""),2))[0],i=e[1],o=(e=it((0,Q.useState)([]),2))[0],l=e[1],s=(e=it((0,Q.useState)({}),2))[0],u=e[1];return(0,Q.useEffect)(function(){var t=!0;return d(null,!0).then(function(e){t&&(u(null==e?void 0:e.pageContext),i(Te&&null!=e&&e.gameSortStyle?e.gameSortStyle:""),l(null==e?void 0:e.timeFilters),null!=e&&e.sorts&&r(e.sorts))},function(e){console.debug(e)}),function(){t=!1}},[]),J().createElement("div",null,0<t.length&&t.map(function(e,t){return J().createElement(rt,at({sortPosition:t,sort:e,sortStyle:a,pageContext:s,timeFilters:o,key:e.token+e.displayName},n))}))}function st(e,n){return e.filter(function(e){var t;return(null===(t=e.presence)||void 0===t?void 0:t.universeId)===n&&(null===(e=e.presence)||void 0===e?void 0:e.userPresenceType)===l.Presence.PresenceTypes.InGame})}function ut(e){return e.charAt(0).toUpperCase()+e.slice(1)}function ct(n){return Object.keys(n).reduce(function(e,t){return"object"==typeof n[t]&&n[t]&&(e[t]=JSON.stringify(n[t])),"number"==typeof n[t]&&(e[t]=n[t]),"string"==typeof n[t]&&(e[t]=encodeURIComponent(n[t])),"boolean"==typeof n[t]&&(e[t]=n[t]?1:0),e},{})}function mt(e){var t=e.id,n=e.children,r=e.gameData,e=e.buildEventProperties;return J().createElement(I.Link,{url:ie(r.placeId,r.name,e(r,t)),className:"game-card-link",id:r.universeId.toString()},J().createElement(R.Thumbnail2d,{type:R.ThumbnailTypes.gameIcon,size:R.ThumbnailGameIconSize.size150,targetId:r.universeId,containerClass:"game-card-thumb-container",format:R.ThumbnailFormat.jpeg,altName:r.name}),J().createElement("div",{className:"game-card-name game-name-title",title:r.name},r.name),n)}function dt(e){var t=e.totalDownVotes,n=e.totalUpVotes,e=e.playerCount,t=kt.getVotePercentage(n,t),e=kt.getAbbreviatedValue(e);return J().createElement("div",{className:"game-card-info","data-testid":"game-tile-stats"},J().createElement("span",{className:"info-label icon-votes-gray"}),t?J().createElement("span",{className:"info-label vote-percentage-label"},t):J().createElement("span",{className:"info-label no-vote"}),J().createElement("span",{className:"info-label icon-playing-counts-gray"}),J().createElement("span",{className:"info-label playing-counts-label"},e))}function ft(e){var t=e.friendData,n=e.gameData,r=e.translate,a=(0,Q.useState)(!1),e=a[0],i=a[1];if(0===t.length)throw new Error("friendData should not be empty");return J().createElement("div",{className:"game-card-friend-info game-card-info","data-testid":"game-tile-stats-friends"},J().createElement("div",{className:"info-avatar",style:{width:22*(t.slice(0,Mt).length-1)+32+"px"}},t.slice(0,Mt).map(function(e){return J().createElement("div",{className:"avatar-card",role:"button",tabIndex:0,key:e.displayName,onClick:function(e){e.stopPropagation(),e.preventDefault(),i(!0)},onKeyDown:function(e){e.code===jt.enter&&(e.stopPropagation(),e.preventDefault(),i(!0))}},J().createElement(R.Thumbnail2d,{type:R.ThumbnailTypes.avatarHeadshot,size:R.ThumbnailAvatarHeadshotSize.size48,targetId:e.id,containerClass:"avatar avatar-headshot avatar-headshot-xs",imgClassName:"avatar-card-image",format:R.ThumbnailFormat.png,altName:e.displayName}))})),r&&J().createElement("span",{className:"info-label text-overflow","data-testid":"game-tile-stats-info-label"},t.length>Ut?r(Lt.LabelPlayingOnePlusUsersWithComma,{username:t[0].displayName,count:t.length-Ut}):r(Lt.LabelPlayingOneUser,{user:t[0].displayName})),J().createElement(Ft,{friendsDataInGame:t,game:n,show:e,onHide:function(e){e.stopPropagation(),e.preventDefault(),i(!1)}}))}var pt=l.EnvironmentUrls.gamesApi,vt={url:{getOmniRecommendations:function(e,t){return{url:pt+"/v1/games/omni-recommendations?model.pageType="+e+(void 0!==t?"&model.sessionId="+t:""),withCredentials:!0}},getOmniRecommendationsMetadata:{url:pt+"/v1/games/omni-recommendations-metadata",withCredentials:!0},getGameList:{url:pt+"/v1/games/list",withCredentials:!0},getGamePasses:function(e,t){return{url:c.urlService.getAbsoluteUrl("/Games/GetGamePassesPaged?placeId="+e+"&startIndex=0&maxRows="+t),withCredentials:!0}},getGameRecommendations:function(e){return{url:pt+"/v1/games/recommendations/game/"+e,withCredentials:!0}},getGameSorts:{url:pt+"/v1/games/sorts",withCredentials:!0},getUniverseVoiceStatus:function(e){return{withCredentials:!0,url:l.EnvironmentUrls.voiceApi+"/v1/settings/universe/"+e}},getVoiceOptInStatus:{withCredentials:!0,url:l.EnvironmentUrls.voiceApi+"/v1/settings/user-opt-in"}},defaultCacheCriteria:{refreshCache:!1,expirationWindowMS:3e4,useCache:!0}},gt=function(e,o,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{i(s.next(e))}catch(e){t(e)}}function a(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}i((s=s.apply(e,o||[])).next())})},ht=function(n,r){var a,i,o,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,i&&(o=2&t[0]?i.return:t[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,i=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(o=0<(o=l.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){l.label=t[1];break}if(6===t[0]&&l.label<o[1]){l.label=o[1],o=t;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(t);break}o[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],i=0}finally{a=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},bt=function(e,t){var n={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},yt=vt.url,wt=vt.defaultCacheCriteria,St=P.dataStores.gamesDataStore,Et=P.dataStores.userDataStoreV2,It=P.dataStores.userDataStore.FriendsUserSortType,Pt=function(){return Et.getFriends({userId:null===E.authenticatedUser||void 0===E.authenticatedUser?void 0:E.authenticatedUser.id,userSort:It.StatusFrequents,isGuest:!1},wt)},Nt=function(r,a,i,o,l,s){return gt(void 0,void 0,Promise,function(){var t,n;return ht(this,function(e){switch(e.label){case 0:return[4,c.httpService.get(yt.getGameList,{sortToken:r,gameSetTargetId:l,contextCountryRegionId:a,exclusiveStartId:s,startRows:i,maxRows:o})];case 1:return n=e.sent().data,t=n.games,t=void 0===t?[]:t,n=bt(n,["games"]),[2,{games:t,metaData:n}]}})})},xt=function(){return gt(void 0,void 0,Promise,function(){return ht(this,function(e){switch(e.label){case 0:return[4,c.httpService.get(vt.url.getGameSorts,{gameSortsContext:"GamesDefaultSorts"})];case 1:return[2,{sorts:e.sent().data.sorts}]}})})},Tt=function(t,n){return gt(void 0,void 0,Promise,function(){return ht(this,function(e){switch(e.label){case 0:return[4,c.httpService.get(vt.url.getOmniRecommendations(t,n))];case 1:return[2,e.sent().data]}})})},Ot=function(t){return gt(void 0,void 0,Promise,function(){return ht(this,function(e){switch(e.label){case 0:return[4,c.httpService.post(vt.url.getOmniRecommendationsMetadata,{Contents:t})];case 1:return[2,e.sent().data]}})})},Rt=function(n){return gt(void 0,void 0,Promise,function(){var t;return ht(this,function(e){switch(e.label){case 0:return[4,St.getPlaceDetails([n])];case 1:return t=e.sent().data,[2,(void 0===t?[]:t)[0]]}})})},Ct=function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},a=(new l.Intl).getDateTimeFormatter(),i=c.urlService.parseQueryString,Dt=c.abbreviateNumber.getAbbreviatedValue,o=c.numberFormat.getNumberFormat,kt={capitalize:ut,humanizeCamelCase:function(e){var t=e.split(/([A-Z][a-z]*)/g);return 1===t.length?e:ut(t.filter(function(e){return 0!==e.length}).join(" "))},parseEventParams:ct,getInGameFriends:st,getVotePercentage:function(e,t){var n=0;if(!Number.isNaN(e)&&!Number.isNaN(t)){if(0===e&&0===t)return;n=0===e&&0!==t?0:0!==e&&0===t||100<(n=Math.floor(e/(e+t)*100))?100:n}return n+"%"},getGearIconName:function(e){return{PowerUps:"PowerUp",Music:"Musical",PersonalTransport:"Transport"}[e]||e},getNumberFormat:o,getAbbreviatedValue:Dt,dateTimeFormatter:a,parseQueryString:i,composeQueryString:function(e){e=c.urlService.composeQueryString(e);return e?"?"+e:""},calculateImpressedIndexes:function(e,n){if(void 0===e)return Array.from(new Array(n[1]-n[0]+1),function(e,t){return t+n[0]});var r=n[0]<e[0]?[n[0],e[0]]:void 0,a=n[1]>e[1]?[e[1],n[1]]:void 0,t=r?new Array(r[1]-r[0]).fill(0).map(function(e,t){return t+r[0]}):[],e=a?new Array(a[1]-a[0]).fill(0).map(function(e,t){return t+a[0]+1}):[];return Ct(Ct([],t),e)},splitArray:function(n,r){if(0===n.length||0===r)return[n];var e=Math.ceil(n.length/r);return new Array(e).fill(0).map(function(e,t){return n.slice(t*r,(t+1)*r)})}},Lt={LabelSponsoredAd:"Label.SponsoredAd",LabelNoSearchResults:"LabelNoSearchResults",LabelPlayingOnePlusUsersWithComma:"LabelPlayingOnePlusUsersWithComma",LabelPlayingOneUser:"LabelPlayingOneUser"},Gt={LabelApiError:"Label.ApiError",LabelGames:"Label.Games"},Dt={common:["Common.GameSorts"],feature:"Feature.PlacesList"},At=function(){return(At=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},jt=de.keyBoardEventCode,Mt=de.numberOfInGameIcons,Ut=de.numberOfInGameNames;ft.defaultProps={translate:void 0};var Ft=(0,t.withTranslations)(function(e){var t=e.show,n=e.onHide,r=e.friendsDataInGame,a=e.game,e=e.translate;return J().createElement(I.Modal,{show:t,onHide:n,size:"lg"},J().createElement(te,{friendsData:r.map(function(e){return At(At({},e),{nameForDisplay:e.displayName})}),friendsInGame:r.map(function(e){return e.id}),game:a,dismissModal:n,translate:e}))},Dt),zt=function(e,o,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{i(s.next(e))}catch(e){t(e)}}function a(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}i((s=s.apply(e,o||[])).next())})},qt=function(n,r){var a,i,o,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,i&&(o=2&t[0]?i.return:t[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,i=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(o=0<(o=l.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){l.label=t[1];break}if(6===t[0]&&l.label<o[1]){l.label=o[1],o=t;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(t);break}o[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],i=0}finally{a=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Ht=(0,Q.forwardRef)(function(e,t){var n=e.id,r=e.buildEventProperties,a=e.gameData,e=e.friendData,i=void 0===e?[]:e,e=(0,Q.useState)(),o=e[0],l=e[1],s=(0,Q.useMemo)(function(){return st(i,a.universeId)},[i,a.universeId]);return(0,Q.useEffect)(function(){void 0===o&&0<s.length&&zt(void 0,void 0,void 0,function(){var t;return qt(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Rt(a.placeId.toString())];case 1:return t=e.sent(),l(t),[3,3];case 2:return t=e.sent(),console.error(t),[3,3];case 3:return[2]}})})},[s,o]),J().createElement("div",{ref:t,className:"grid-item-container game-card-container","data-testid":"game-tile"},J().createElement(mt,{id:n,buildEventProperties:r,gameData:a},0<s.length&&o?J().createElement(ft,{friendData:s,gameData:o}):J().createElement(dt,{totalUpVotes:a.totalUpVotes,totalDownVotes:a.totalDownVotes,playerCount:a.playerCount})))});Ht.displayName="GameTile";var Vt=(0,Q.forwardRef)(function(e,t){var n=e.translate,r=e.id,a=e.buildEventProperties,e=e.gameData;return J().createElement("div",{ref:t,className:"grid-item-container game-card-container","data-testid":"game-tile-sponsored"},J().createElement(mt,{id:r,buildEventProperties:a,gameData:e},J().createElement("div",{className:"game-card-native-ad"},J().createElement("div",{className:"native-ad-label"},n(Lt.LabelSponsoredAd)))))});Vt.displayName="SponsoredGameTile";var Bt=function(){return(Bt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Wt=function(e,o,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{i(s.next(e))}catch(e){t(e)}}function a(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}i((s=s.apply(e,o||[])).next())})},Yt=function(n,r){var a,i,o,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,i&&(o=2&t[0]?i.return:t[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,i=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(o=0<(o=l.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){l.label=t[1];break}if(6===t[0]&&l.label<o[1]){l.label=o[1],o=t;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(t);break}o[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],i=0}finally{a=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};function Qt(){function r(e){(e.detail||[]).forEach(function(e){i.current[e.userId]&&(i.current[e.userId]=Bt(Bt({},i.current[e.userId]),{presence:e}))}),a(Bt({},i.current))}var e=this,t=(0,Q.useState)({}),n=t[0],a=t[1],i=(0,Q.useRef)(n);return(0,Q.useEffect)(function(){return Wt(e,void 0,void 0,function(){var t,n;return Yt(this,function(e){switch(e.label){case 0:if((null==(t=E.deviceMeta.getDeviceMeta())?void 0:t.deviceType)!==E.deviceMeta.DeviceTypes.computer)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Pt()];case 2:return n=e.sent().userData,n=(n||[]).reduce(function(e,t){return e[t.id]=t,e},{}),i.current=n,a(Bt({},i.current)),document.addEventListener("Roblox.Presence.Update",r),[3,4];case 3:return n=e.sent(),console.error("useFriendsPresence failed to initialized with the error",n),[3,4];case 4:return[2]}})}),function(){document.removeEventListener("Roblox.Presence.Update",r)}},[]),Object.values(n)}function Jt(e){var t=e.universeId,n=e.placeId,r=(e=Kt(t))[0],a=e[1];switch(r){case void 0:return J().createElement("div",{className:"shimmer play-button game-card-thumb-container","data-testid":"play-button-default"});case Xt.GuestProhibited:case Xt.Playable:return J().createElement(Zt,{universeId:t,placeId:n,status:r});case Xt.PurchaseRequired:return J().createElement(en,{universeId:t,placeId:n,iconClassName:"icon-common-play",refetchPlayabilityStatus:a});case Xt.UniverseRootPlaceIsPrivate:return J().createElement("div",{className:"btn-growth-lg play-button"},J().createElement("span",{className:"icon-status-private"}));default:return J().createElement("div",{className:"btn-growth-lg play-button"},J().createElement("span",{className:"icon-status-unavailable"}))}}var $t=function(e,o,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{i(s.next(e))}catch(e){t(e)}}function a(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}i((s=s.apply(e,o||[])).next())})},_t=function(n,r){var a,i,o,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,i&&(o=2&t[0]?i.return:t[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,i=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(o=0<(o=l.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){l.label=t[1];break}if(6===t[0]&&l.label<o[1]){l.label=o[1],o=t;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(t);break}o[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],i=0}finally{a=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Kt=l.PlayButton.usePlayabilityStatus,Xt=l.PlayButton.PlayabilityStatuses,Zt=l.PlayButton.PlayButton,en=l.PlayButton.PurchaseButton,tn=(0,Q.forwardRef)(function(e,t){var n=e.id,r=e.buildEventProperties,a=e.gameData,i=e.translate,e=(0,Q.useState)(),o=e[0],l=e[1],s=Qt(),u=(0,Q.useMemo)(function(){return st(s,a.universeId)},[s,a.universeId]),e=(0,Q.useMemo)(function(){return 0<u.length&&o?J().createElement(ft,{gameData:o,friendData:u,translate:i}):J().createElement("div",{className:"game-card-description-info font-body","data-testid":"featured-grid-tile-description"},null==o?void 0:o.description)},[u]);return(0,Q.useEffect)(function(){$t(void 0,void 0,void 0,function(){var t;return _t(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Rt(a.placeId.toString())];case 1:return t=e.sent(),l(t),[3,3];case 2:return t=e.sent(),console.error(t),[3,3];case 3:return[2]}})})},[]),J().createElement("div",{ref:t,className:"featured-grid-item-container game-card-container","data-testid":"game-tile-featured"},J().createElement(I.Link,{url:ee(a.placeId,a.name,r(a,n)),className:"game-card-link",id:a.universeId.toString()},J().createElement(R.Thumbnail2d,{type:R.ThumbnailTypes.gameIcon,size:R.ThumbnailGameIconSize.size512,targetId:a.universeId,containerClass:"game-card-thumb-container",format:R.ThumbnailFormat.jpeg,altName:a.name}),J().createElement("div",{className:"game-card-name-info"},J().createElement("div",null,J().createElement("div",{className:"game-card-name game-name-title",title:a.name},a.name),J().createElement(dt,{totalUpVotes:a.totalUpVotes,totalDownVotes:a.totalDownVotes,playerCount:a.playerCount})),J().createElement(Jt,{universeId:a.universeId.toString(),placeId:a.placeId.toString()})),e))});tn.displayName="FeaturedGridTile";var nn=function(){return(nn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},rn=function(e,t){var n={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},an=(0,Q.forwardRef)(function(e,t){var n=e.emphasis,e=rn(e,["emphasis"]);return e.gameData.isShowSponsoredLabel?J().createElement(Vt,nn({ref:t},e)):n?J().createElement(tn,nn({ref:t},e)):J().createElement(Ht,nn({ref:t},e))});an.displayName="GameGridTile";var on=(0,Q.forwardRef)(function(e,t){var n=e.gameData,r=e.translate,a=e.emphasis,i=e.buildEventProperties,o=e.tileRef;return J().createElement("div",{"data-testid":"game-grid",ref:t,className:"game-grid"},n.map(function(e,t){return J().createElement(an,{ref:function(e){(!0===a&&1===t||!1===a&&0===t)&&o&&(o.current=e)},key:t,id:t,gameData:e,translate:r,buildEventProperties:i,emphasis:!0===a&&0===t})}))});function ln(n,r){var a;return void 0===r&&(r=300),[function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];clearTimeout(a),a=setTimeout(function(){n.apply(void 0,e)},r)},function(){clearTimeout(a)}]}function sn(n,e,t,r){function a(){var e=[],t=r(f.current,v.current,g.current,h.current,null===(t=n.current)||void 0===t?void 0:t.clientWidth,null===(t=n.current)||void 0===t?void 0:t.clientHeight);t&&(e=kt.calculateImpressedIndexes(b.current,t)),kt.splitArray(e,de.maxTilesInGameImpressionsEvent).forEach(function(e){var t,n=0!==e.length?p.current(e):void 0;void 0!==n&&0<n.absPositions.length&&(t=n.absPositions,void 0===b.current?b.current=[t[0],t[t.length-1]]:(e=(b.current[0]<t[0]?b.current:t)[0],t=b.current[1]>t[t.length-1]?b.current[1]:t[t.length-1],b.current=[e,t]),n=wn(n),P.eventStreamService.sendEvent.apply(P.eventStreamService,n))})}function i(){w(),E(),window.removeEventListener("scroll",y),window.removeEventListener("resize",S)}var o=(0,Q.useState)(window.innerWidth),l=o[0],s=o[1],u=(m=(0,Q.useState)(window.innerHeight))[0],c=m[1],m=(o=(0,Q.useState)(window.pageYOffset))[0],d=o[1],f=(0,Q.useRef)(e),p=(0,Q.useRef)(t),v=(0,Q.useRef)(l),g=(0,Q.useRef)(u),h=(0,Q.useRef)(m),b=(0,Q.useRef)(void 0),y=(o=ln(function(){h.current=window.pageYOffset,g.current=window.innerHeight,d(window.pageYOffset),c(window.innerHeight),a()}))[0],w=o[1],S=(o=ln(function(){v.current=window.innerWidth,g.current=window.innerHeight,h.current=window.pageYOffset,d(window.pageYOffset),c(window.innerHeight),s(window.innerWidth),a()}))[0],E=o[1];return(0,Q.useEffect)(function(){return window.addEventListener("scroll",y),window.addEventListener("resize",S),i},[]),(0,Q.useEffect)(function(){f.current=e,p.current=t,a()},[t,e]),[u,l,m]}function un(e){var a=e.sort,t=e.translate,n=(0,Q.useRef)(null),r=(0,Q.useRef)(null),i=(e=(0,Q.useState)(0))[0],o=e[1],l=(e=(0,Q.useState)({}))[0],s=e[1],u=(e=(0,Q.useState)(void 0))[0],c=e[1],m=(e=(0,Q.useState)(!0))[0],d=e[1],f=(0,Q.useCallback)(function(){return xn(void 0,void 0,void 0,function(){var t,n,r;return Tn(this,function(e){switch(e.label){case 0:d(!0),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Nt(a.token,a.contextCountryRegionId,i,de.numberOfGameTilesPerLoad,a.gameSetTargetId,l.nextPageExclusiveStartId)];case 2:return r=e.sent(),t=r.games,n=r.metaData,v().unstable_batchedUpdates(function(){c(On(On([],u||[]),t)),o(function(e){return e+de.numberOfGameTilesPerLoad}),s(n)}),[3,4];case 3:return r=e.sent(),console.error(r),[3,4];case 4:return d(!1),[2]}})})},[i,l,u,a]),p=(0,Q.useCallback)(function(){var e=((null===(e=n.current)||void 0===e?void 0:e.offsetTop)||0)+((null===(t=n.current)||void 0===t?void 0:t.clientHeight)||0),t=window.pageYOffset+window.innerHeight;e<t&&!1===(null==l?void 0:l.hasMoreRows)?window.removeEventListener("scroll",p):e<t&&!0===(null==l?void 0:l.hasMoreRows)&&!1===m&&f()},[null==l?void 0:l.hasMoreRows,f,m]),e=(0,Q.useCallback)(function(e){if(void 0!==u){e=e.filter(function(e){return e<(null==u?void 0:u.length)});return{rootPlaceIds:e.map(function(e){return u[e].placeId}),universeIds:e.map(function(e){return u[e].universeId}),absPositions:e,adsPositions:e.map(function(e){return u[e].isSponsored?1:0}),emphasisFlag:!1,page:hn}}},[u]);return sn(r,!1,e,Nn.calculateViewedGameData),(0,Q.useEffect)(function(){return window.addEventListener("scroll",p),function(){window.removeEventListener("scroll",p)}},[p,a]),(0,Q.useEffect)(function(){c(void 0),f()},[a]),J().createElement(J().Fragment,null,J().createElement(on,{ref:n,emphasis:!1,tileRef:r,gameData:u||[],translate:t,buildEventProperties:function(e,t){return{placeId:e.placeId,universeId:e.universeId,isAd:e.isSponsored,nativeAdData:e.nativeAdData,position:t,numberOfLoadedTiles:(u||[]).length,gameSetTypeId:a.gameSetTypeId,gameSetTargetId:a.gameSetTargetId,page:hn}}}),m&&J().createElement(I.Loading,null))}function cn(r,a,i){return Rn(void 0,void 0,Promise,function(){var t,n;return Cn(this,function(e){switch(e.label){case 0:t=null;try{t=P.localStorageService.getLocalStorage(r)}catch(e){t=null}return null!==t&&t.userId===l.CurrentUser.userId&&i(t)?[2,t.data]:[4,a()];case 1:return n=e.sent(),P.localStorageService.setLocalStorage(r,{data:n,userId:l.CurrentUser.userId||"guest",time:(new Date).getTime()}),[2,n]}})})}on.displayName="GameGrid";var mn=function(){return(mn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},dn=function(e,t){var n={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},fn=(a=P.eventStreamService.eventTypes).pageLoad,pn=a.formInteraction,vn="gameImpressions",gn="sortDetailReferral",hn="sortDetailPageDiscover",bn="sortDetailPageHome",yn="homePageSessionInfo",wn=function(e){e=dn(e,[]);return[{name:vn,type:vn,context:pn},ct(mn({},e))]},Sn=function(e){return void 0===e&&(e={}),[{name:gn,type:gn,context:fn},ct(mn({},e))]},En=function(){return(En=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},In={paddingSize:10,featureTileDifference:1},i=En(En({},In),{calculateViewedGameData:function(e,t,n,r,a,i){if(a&&i){t=Math.floor((t-2*In.paddingSize)/a),a=t*Math.round(r/i),i=t*Math.round((r+n)/i);return[a=e?Math.max(a-In.featureTileDifference,0):a,i=e?i-In.featureTileDifference:i]}}}),Pn={paddingSize:12,horizontalGutterSize:12,verticalGutterSize:24,featureTileDifference:3},Nn=En(En({},Pn),{calculateViewedGameData:function(e,t,n,r,a,i){if(a&&i){t=Math.floor((t-Pn.paddingSize)/(a+Pn.horizontalGutterSize)),a=t*Math.round((r-Pn.paddingSize)/(i+Pn.verticalGutterSize)),i=t*Math.round((r+n-Pn.paddingSize)/(i+Pn.verticalGutterSize));return[a=e?Math.max(a-Pn.featureTileDifference,0):a,i=e?i-Pn.featureTileDifference:i]}}}),xn=function(e,o,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{i(s.next(e))}catch(e){t(e)}}function a(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}i((s=s.apply(e,o||[])).next())})},Tn=function(n,r){var a,i,o,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,i&&(o=2&t[0]?i.return:t[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,i=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(o=0<(o=l.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){l.label=t[1];break}if(6===t[0]&&l.label<o[1]){l.label=o[1],o=t;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(t);break}o[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],i=0}finally{a=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},On=function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},Rn=function(e,o,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{i(s.next(e))}catch(e){t(e)}}function a(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}i((s=s.apply(e,o||[])).next())})},Cn=function(n,r){var a,i,o,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,i&&(o=2&t[0]?i.return:t[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,i=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(o=0<(o=l.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){l.label=t[1];break}if(6===t[0]&&l.label<o[1]){l.label=o[1],o=t;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(t);break}o[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],i=0}finally{a=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Dn=function(e,o,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{i(s.next(e))}catch(e){t(e)}}function a(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}i((s=s.apply(e,o||[])).next())})},kn=function(n,r){var a,i,o,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,i&&(o=2&t[0]?i.return:t[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,i=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(o=0<(o=l.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){l.label=t[1];break}if(6===t[0]&&l.label<o[1]){l.label=o[1],o=t;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(t);break}o[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],i=0}finally{a=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Ln="gameSort",Gn=function(){return Dn(void 0,void 0,void 0,function(){return kn(this,function(e){return[2,cn(Ln,xt,function(e){return e.time+e.data.sorts[0].tokenExpiryInSeconds>(new Date).getTime()})]})})},An=I.Button.variants;function jn(e){var r=e.sort,t=e.translate,a=e.homePageSessionInfo,n=(0,Q.useRef)(null),i=(0,Q.useRef)(null),o=(e=(0,Q.useState)(void 0))[0],l=e[1],s=(e=(0,Q.useState)(!0))[0],u=e[1],c=(0,Q.useCallback)(function(){return(o||[]).length<r.recommendationList.length},[o,r]),m=(0,Q.useCallback)(function(){return Zn(void 0,void 0,void 0,function(){var t,n;return er(this,function(e){switch(e.label){case 0:u(!0),n=(o||[]).length,n=r.recommendationList.slice(n,n+de.numberOfGameTilesPerLoad),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Xn(n,a)];case 2:return t=e.sent().contentMetadata,l(tr(tr([],o||[]),n.map(function(e){return t[e.contentType][e.contentId]}))),[3,4];case 3:return n=e.sent(),console.error(n),[3,4];case 4:return u(!1),[2]}})})},[o,r]),d=(0,Q.useCallback)(function(){var e=((null===(e=n.current)||void 0===e?void 0:e.offsetTop)||0)+((null===(t=n.current)||void 0===t?void 0:t.clientHeight)||0),t=window.pageYOffset+window.innerHeight;e<t&&!c()?window.removeEventListener("scroll",d):e<t&&c()&&!1===s&&m()},[c,m,s]),e=(0,Q.useCallback)(function(e){if(void 0!==o){e=e.filter(function(e){return e<(null==o?void 0:o.length)});return{rootPlaceIds:e.map(function(e){return o[e].placeId}),universeIds:e.map(function(e){return o[e].universeId}),absPositions:e,adsPositions:e.map(function(e){return o[e].isSponsored?1:0}),homePageSessionInfo:a,emphasisFlag:!1,page:bn}}},[o,a]);return sn(i,!1,e,Nn.calculateViewedGameData),(0,Q.useEffect)(function(){return window.addEventListener("scroll",d),function(){window.removeEventListener("scroll",d)}},[d,r]),(0,Q.useEffect)(function(){l(void 0),m()},[r]),J().createElement(J().Fragment,null,J().createElement(on,{ref:n,emphasis:!1,tileRef:i,gameData:o||[],translate:t,buildEventProperties:function(e,t){return{placeId:e.placeId,universeId:e.universeId,isAd:e.isSponsored,nativeAdData:e.nativeAdData,position:t,numberOfLoadedTiles:(o||[]).length,gameSetTypeId:r.topicId,homePageSessionInfo:a,page:bn}}}),s&&J().createElement(I.Loading,null))}function Mn(e){e instanceof SyntaxError&&window.sessionStorage.removeItem(rr)}function Un(n,r){void 0===r&&(r=!1);var e=(0,Q.useState)(ir([n])[n]),t=e[0],a=e[1];return(0,Q.useEffect)(function(){var e,t;r&&(t=c.uuidService.generateRandomUuid(),ar(((e={})[n]=t,e)),a(t))},[]),t}(Dt=function(e){var t=e.errorMessage,n=e.onRefresh,e=e.className;return J().createElement("div",{"data-testid":"error-status",className:$()("game-error",e)},J().createElement("span",{className:"icon-spot-error-2xl"}),J().createElement("p",{className:"text-label error-text"},t),J().createElement(I.Button,{className:"refresh-button",variant:An.control,onClick:n},J().createElement("span",{className:"icon-common-refresh"})))}).defaultProps={className:""};var Fn,zn=Dt,qn=function(e,o,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{i(s.next(e))}catch(e){t(e)}}function a(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}i((s=s.apply(e,o||[])).next())})},Hn=function(n,r){var a,i,o,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,i&&(o=2&t[0]?i.return:t[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,i=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(o=0<(o=l.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){l.label=t[1];break}if(6===t[0]&&l.label<o[1]){l.label=o[1],o=t;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(t);break}o[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],i=0}finally{a=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Vn=(0,t.withTranslations)(function(e){function t(){return qn(void 0,void 0,void 0,function(){var t;return Hn(this,function(e){switch(e.label){case 0:u(!1),l(void 0),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Gn()];case 2:return t=e.sent().sorts,void 0===(t=t.find(function(e){return e.name===a}))?s(!0):l(t),[3,4];case 3:return e.sent(),u(!0),[3,4];case 4:return[2]}})})}var n=e.match,r=e.translate,a=decodeURIComponent(n.params.sortName),i=(0,Q.useState)(void 0),o=i[0],l=i[1],e=(0,Q.useState)(!1),n=e[0],s=e[1],i=(0,Q.useState)(!1),e=i[0],u=i[1];return(0,Q.useEffect)(function(){t()},[a]),e?J().createElement("div",{className:"game-sort-detail-container"},J().createElement("h3",null,r(Gt.LabelGames)),J().createElement("div",{className:"game-sort-detail"},J().createElement(zn,{errorMessage:r(Gt.LabelApiError),onRefresh:t}))):n?J().createElement(S.Redirect,{to:"/"}):o?J().createElement("div",{className:"game-sort-detail-container"},J().createElement("h3",null,o.displayName),J().createElement(un,{sort:o,translate:r})):J().createElement(I.Loading,null)},r),Bn=l.EnvironmentUrls.apiGatewayUrl,Wn={getExperimentationValues:function(e,t,n){return{url:Bn+"/product-experimentation-platform/v1/projects/"+e+"/layers/"+t+"/values?parameters="+n.join(","),withCredentials:!0}}},a={homePage:{AvatarHomepageRecommendationsRowNum:0,IsDiscoveryApiEnabled:!0,SponsoredAdsHomepageRowNum:0}},i={homePage:"PlayerApp.HomePage.UX"},Yn={url:{getOmniRecommendations:{url:(Dt=l.EnvironmentUrls.apiGatewayUrl)+"/discovery-api/omni-recommendation",withCredentials:!0},getOmniRecommendationsMetadata:{url:Dt+"/discovery-api/omni-recommendation-metadata",withCredentials:!0}}},Qn=function(){return(Qn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Jn=function(e,o,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{i(s.next(e))}catch(e){t(e)}}function a(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}i((s=s.apply(e,o||[])).next())})},$n=function(n,r){var a,i,o,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,i&&(o=2&t[0]?i.return:t[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,i=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(o=0<(o=l.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){l.label=t[1];break}if(6===t[0]&&l.label<o[1]){l.label=o[1],o=t;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(t);break}o[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],i=0}finally{a=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},_n=function(r,a,i){return void 0===i&&(i=1),Jn(void 0,void 0,Promise,function(){var n,t;return $n(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,c.httpService.get(Wn.getExperimentationValues(i,r,Object.keys(a)))];case 1:return n=e.sent().data,t=Object.keys(n).reduce(function(e,t){return null!==n[t]&&(e[t]=n[t]),e},{}),[2,Qn(Qn({},a),t)];case 2:return e.sent(),[2,a];case 3:return[2]}})})},Kn=function(r,a){return Jn(void 0,void 0,Promise,function(){var t,n;return $n(this,function(e){switch(e.label){case 0:return t={pageType:r,sessionId:a||c.uuidService.generateRandomUuid()},[4,c.httpService.post(Yn.url.getOmniRecommendations,t)];case 1:return n=e.sent().data,Object.keys(n.contentMetadata.Game).forEach(function(e){e=n.contentMetadata.Game[e];e.placeId=e.rootPlaceId}),[2,n]}})})},Xn=function(n,r){return Jn(void 0,void 0,Promise,function(){var t;return $n(this,function(e){switch(e.label){case 0:return[4,c.httpService.post(Yn.url.getOmniRecommendationsMetadata,{contents:n,sessionId:r||c.uuidService.generateRandomUuid()})];case 1:return t=e.sent().data,Object.keys(t.contentMetadata.Game).forEach(function(e){e=t.contentMetadata.Game[e];e.placeId=e.rootPlaceId}),[2,t]}})})},Zn=function(e,o,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{i(s.next(e))}catch(e){t(e)}}function a(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}i((s=s.apply(e,o||[])).next())})},er=function(n,r){var a,i,o,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,i&&(o=2&t[0]?i.return:t[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,i=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(o=0<(o=l.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){l.label=t[1];break}if(6===t[0]&&l.label<o[1]){l.label=o[1],o=t;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(t);break}o[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],i=0}finally{a=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},tr=function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},nr=function(){return(nr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},rr="eventTracker",ar=function(e){try{var t=JSON.parse(window.sessionStorage.getItem(rr)||"{}"),t=nr(nr({},t),e);return window.sessionStorage.setItem(rr,JSON.stringify(t)),!0}catch(e){return Mn(e),!1}},ir=function(e){try{var n=JSON.parse(window.sessionStorage.getItem(rr)||"{}");return e.reduce(function(e,t){return e[t]=n[t],e},{})}catch(e){return Mn(e),{}}};function or(e){var r=e.sort,t=e.translate,n=(0,Q.useRef)(null),a=(0,Q.useRef)(null),i=(e=(0,Q.useState)(void 0))[0],o=e[1],l=(e=(0,Q.useState)(!0))[0],s=e[1],u=Un(yn),c=(0,Q.useCallback)(function(){return(i||[]).length<r.RecommendationList.length},[i,r]),m=(0,Q.useCallback)(function(){return mr(void 0,void 0,void 0,function(){var t,n;return dr(this,function(e){switch(e.label){case 0:s(!0),n=(i||[]).length,n=r.RecommendationList.slice(n,n+de.numberOfGameTilesPerLoad),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Ot(n)];case 2:return t=e.sent().ContentMetadata,o(fr(fr([],i||[]),n.map(function(e){return t[e.ContentType][e.ContentId]}))),[3,4];case 3:return n=e.sent(),console.error(n),[3,4];case 4:return s(!1),[2]}})})},[i,r]),d=(0,Q.useCallback)(function(){var e=((null===(e=n.current)||void 0===e?void 0:e.offsetTop)||0)+((null===(t=n.current)||void 0===t?void 0:t.clientHeight)||0),t=window.pageYOffset+window.innerHeight;e<t&&!c()?window.removeEventListener("scroll",d):e<t&&c()&&!1===l&&m()},[c,m,l]),e=(0,Q.useCallback)(function(e){if(void 0!==i){e=e.filter(function(e){return e<(null==i?void 0:i.length)});return{rootPlaceIds:e.map(function(e){return i[e].placeId}),universeIds:e.map(function(e){return i[e].universeId}),absPositions:e,adsPositions:e.map(function(e){return i[e].isSponsored?1:0}),homePageSessionInfo:u,emphasisFlag:!1,page:bn}}},[i,u]);return sn(a,!1,e,Nn.calculateViewedGameData),(0,Q.useEffect)(function(){return window.addEventListener("scroll",d),function(){window.removeEventListener("scroll",d)}},[d,r]),(0,Q.useEffect)(function(){o(void 0),m()},[r]),J().createElement(J().Fragment,null,J().createElement(on,{ref:n,emphasis:!1,tileRef:a,gameData:i||[],translate:t,buildEventProperties:function(e,t){return{placeId:e.placeId,universeId:e.universeId,isAd:e.isSponsored,nativeAdData:e.nativeAdData,position:t,numberOfLoadedTiles:(i||[]).length,gameSetTypeId:r.TopicId,homePageSessionInfo:u,page:bn}}}),l&&J().createElement(I.Loading,null))}function lr(e){var t=e.match,n=decodeURIComponent(t.params.sortName),e=(a=(0,Q.useState)(void 0))[0],r=a[1],t=(0,S.useLocation)(),a=(0,S.useHistory)();return yr(Sn,["position","homePageSessionInfo","sortId","page","treatmentType"],[],t,a),(0,Q.useEffect)(function(){wr(void 0,void 0,void 0,function(){var t;return Sr(this,function(e){switch(e.label){case 0:return[4,_n(Er.homePage,Ir.homePage)];case 1:return t=e.sent(),r(t.IsDiscoveryApiEnabled),[2]}})})},[]),!1===e?J().createElement(gr,{sortName:n}):!0===e?J().createElement(cr,{sortName:n}):J().createElement(I.Loading,null)}(Dt={}).Melee="Melee",Dt.Ranged="Ranged",Dt.Explosive="Explosive",Dt.PowerUps="PowerUps",Dt.Navigation="Navigation",Dt.Music="Music",Dt.Social="Social",Dt.Building="Building",Dt.PersonalTransport="PersonalTransport",(Dt=Fn=Fn||{}).Home="Home",Dt.Games="Games",(Dt={}).Carousel="Carousel",Dt.GenreExplorerLabel="GenreExplorerLabel",Dt.SponsoredGameCarousel="SponsoredGameCarousel",(Dt={}).Invalid="Invalid",Dt.HasLootBoxes="HasLootBoxes",Dt.HasInGameTrading="HasInGameTrading",Dt.IsUsingLootBoxApi="IsUsingLootBoxApi",Dt.IsUsingInGameTradingApi="IsUsingInGameTradingApi",Dt.HasAllowedExternalLinkReferences="HasAllowedExternalLinkReferences",Dt.IsUsingAllowedExternalLinkReferencesApi="IsUsingAllowedExternalLinkReferencesApi",(Dt={}).MorphToR6="MorphToR6",Dt.PlayerChoice="PlayerChoice",Dt.MorphToR15="MorphToR15";var sr=function(e,o,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{i(s.next(e))}catch(e){t(e)}}function a(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}i((s=s.apply(e,o||[])).next())})},ur=function(n,r){var a,i,o,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,i&&(o=2&t[0]?i.return:t[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,i=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(o=0<(o=l.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){l.label=t[1];break}if(6===t[0]&&l.label<o[1]){l.label=o[1],o=t;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(t);break}o[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],i=0}finally{a=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},cr=(0,t.withTranslations)(function(e){function t(){return sr(void 0,void 0,void 0,function(){var t;return ur(this,function(e){switch(e.label){case 0:c(!1),o(void 0),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Kn(Fn.Home,l)];case 2:return t=e.sent(),void 0===(t=t.sorts.find(function(e){return e.topic===n}))?u(!0):o(t),[3,4];case 3:return e.sent(),c(!0),[3,4];case 4:return[2]}})})}var n=e.sortName,r=e.translate,a=(0,Q.useState)(void 0),i=a[0],o=a[1],l=Un(yn),s=(0,Q.useState)(!1),e=s[0],u=s[1],a=(0,Q.useState)(!1),s=a[0],c=a[1];return(0,Q.useEffect)(function(){t()},[n]),s?J().createElement("div",{className:"game-sort-detail-container"},J().createElement("h3",null,r(Gt.LabelGames)),J().createElement("div",{className:"game-sort-detail"},J().createElement(zn,{errorMessage:r(Gt.LabelApiError),onRefresh:t}))):e?J().createElement(S.Redirect,{to:"/"}):i?J().createElement("div",{className:"game-sort-detail-container"},J().createElement("h3",null,n),J().createElement(jn,{homePageSessionInfo:l,sort:i,translate:r})):J().createElement(I.Loading,null)},r),mr=function(e,o,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{i(s.next(e))}catch(e){t(e)}}function a(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}i((s=s.apply(e,o||[])).next())})},dr=function(n,r){var a,i,o,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,i&&(o=2&t[0]?i.return:t[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,i=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(o=0<(o=l.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){l.label=t[1];break}if(6===t[0]&&l.label<o[1]){l.label=o[1],o=t;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(t);break}o[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],i=0}finally{a=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},fr=function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},pr=function(e,o,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{i(s.next(e))}catch(e){t(e)}}function a(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}i((s=s.apply(e,o||[])).next())})},vr=function(n,r){var a,i,o,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,i&&(o=2&t[0]?i.return:t[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,i=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(o=0<(o=l.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){l.label=t[1];break}if(6===t[0]&&l.label<o[1]){l.label=o[1],o=t;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(t);break}o[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],i=0}finally{a=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},gr=(0,t.withTranslations)(function(e){function t(){return pr(void 0,void 0,void 0,function(){var t;return vr(this,function(e){switch(e.label){case 0:u(!1),o(void 0),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Tt(Fn.Home)];case 2:return t=e.sent(),void 0===(t=t.Sorts.find(function(e){return e.Topic===n}))?s(!0):o(t),[3,4];case 3:return e.sent(),u(!0),[3,4];case 4:return[2]}})})}var n=e.sortName,r=e.translate,a=(0,Q.useState)(void 0),i=a[0],o=a[1],l=(0,Q.useState)(!1),e=l[0],s=l[1],a=(0,Q.useState)(!1),l=a[0],u=a[1];return(0,Q.useEffect)(function(){t()},[n]),l?J().createElement("div",{className:"game-sort-detail-container"},J().createElement("h3",null,r(Gt.LabelGames)),J().createElement("div",{className:"game-sort-detail"},J().createElement(zn,{errorMessage:r(Gt.LabelApiError),onRefresh:t}))):e?J().createElement(S.Redirect,{to:"/"}):i?J().createElement("div",{className:"game-sort-detail-container"},J().createElement("h3",null,n),J().createElement(or,{sort:i,translate:r})):J().createElement(I.Loading,null)},r),hr=kt.parseQueryString,br=kt.composeQueryString,yr=function(r,a,i,o,l){void 0===o&&(o=window.location),void 0===l&&(l=window.history);var e=(0,Q.useState)(hr(o.search)),t=e[0],s=e[1];return(0,Q.useEffect)(function(){var n,e,t;n=hr(o.search),e=a.reduce(function(e,t){return void 0===n[t]&&null===n[t]||(e[t]=n[t]),e},{}),t=i.reduce(function(e,t){return void 0===n[t]&&null===n[t]||(e[t]=n[t]),e},{}),s(e),ar(e),void 0!==l.replace&&l.replace(""+o.pathname+br(t)),void 0!==l.replaceState&&l.replaceState(void 0,"",""+o.pathname+o.hash+br(t)),P.eventStreamService.sendEvent.apply(P.eventStreamService,r(e))},[]),t},wr=function(e,o,l,s){return new(l=l||Promise)(function(n,t){function r(e){try{i(s.next(e))}catch(e){t(e)}}function a(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(r,a)}i((s=s.apply(e,o||[])).next())})},Sr=function(n,r){var a,i,o,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,i&&(o=2&t[0]?i.return:t[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,i=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(o=0<(o=l.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){l.label=t[1];break}if(6===t[0]&&l.label<o[1]){l.label=o[1],o=t;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(t);break}o[2]&&l.ops.pop(),l.trys.pop();continue}t=r.call(n,l)}catch(e){t=[6,e],i=0}finally{a=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Er=i,Ir=a,Pr=(0,t.withTranslations)(function(e){return J().createElement(S.HashRouter,null,J().createElement(S.Route,{exact:!0,path:"/",render:function(){return J().createElement(lt,e)}}),J().createElement(S.Route,{exact:!0,path:"/sortName/:sortName",component:Vn}),J().createElement(S.Route,{exact:!0,path:"/sortName/v2/:sortName",component:lr}))},n);(0,c.ready)(function(){(0,e.render)(J().createElement(Pr,null),document.getElementById("games-carousel-page"))})}()}();
//# sourceMappingURL=https://js.rbxcdn.com/41493fdcbcb7ce9d7b11-gameCarousel.bundle.min.js.map

/* Bundle detector */
window.Roblox && window.Roblox.BundleDetector && window.Roblox.BundleDetector.bundleDetected("GameCarousel");